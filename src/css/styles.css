:root {
  --bg: #000;
  --fg: #03ffaf; /* default glow-ish green */
  --accent: #0ff; /* CLU cyan option will override */
  --control-bg: rgba(16,16,16,0.9);
  --control-fg: #ddd;
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --controls-transition: 240ms ease;
  --controls-shadow: 0 -8px 24px rgba(0,0,0,.35);
  --controls-safe-pad: 0px; /* can be used if you want extra breathing room */
}

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: #000;
  overflow: hidden;
}

body {
  padding-top: env(safe-area-inset-top);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
}

#stage {
  position: fixed; 
  inset: 0;
  display: block;
  height: 100%; 
  width: 100%;
  min-height: 100dvh; /* for mobile */
  min-width: 100dvw; /* for mobile */
  overflow: hidden;
  background: #000;
}

#canvas { 
  position: fixed;
  inset: 0;
  background: #000;
  display: block; 
  width: 100%; 
  min-width: 100dvw; 
  height: 100%; 
  min-height: 100dvh; 
  touch-action: none;
  z-index: 0;
}


.controls {
  position: fixed; left: 0; right: 0; bottom: 0;
  background: var(--control-bg);
  color: var(--control-fg);
  padding: 8px 12px calc(12px + var(--safe-bottom));
  display: grid; gap: 6px;
  grid-template-columns: 1fr 1fr 1fr;
  align-items: center;
  /* keep above browser UI */
  z-index: 1000;
}

.clickable { cursor: pointer; }
.controls .row { display: flex; gap: 8px; align-items: baseline; }
label { opacity: 0.8; font-family: ui-monospace, SFMono-Regular, Menlo, monospace; }
button { background: transparent; color: inherit; border: 1px solid #444; padding: 4px 8px; }

/* Footer controls are fixed to bottom, hidden by default */
#controls {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 30;
  transform: translateY(100%);
  opacity: 0.001;
  pointer-events: none;
  transition:
    transform var(--controls-transition),
    opacity 180ms ease-in;
  box-shadow: var(--controls-shadow);
  will-change: transform, opacity;
}

/* When visible, they slide up and accept interaction */
#controls.is-visible {
  transform: translateY(0);
  opacity: 1;
  pointer-events: auto;
}

/* When controls are visible, push content up so nothing is obscured */
body.has-controls-visible {
  padding-bottom: calc(var(--controls-height, 64px) + var(--controls-safe-pad));
}

/* Mobile-only, invisible bottom-edge reveal zone */
.reveal-edge {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  height: 28px;            /* comfortable tappable edge */
  z-index: 1001;
  pointer-events: none;     /* disabled by default on desktop */
  background: transparent;  /* invisible */
}

/* Enable the edge only on touch/non-hover devices */
@media (hover: none), (pointer: coarse) {
  .reveal-edge {
    pointer-events: auto;
  }
}
.hud-badge {
  position: fixed;
  bottom: 72px;
  left: 50%;
  transform: translateX(-50%) translateY(8px);
  padding: 6px 10px;
  border-radius: 10px;
  background: rgba(0,0,0,0.7);
  color: #fff;
  font: 12px/1.2 system-ui, sans-serif;
  opacity: 0;
  pointer-events: none;
  transition: transform .15s ease, opacity .15s ease;
}
.hud-badge.on {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

.hud-help-wrap { margin-top: 8px; opacity: .9; }
.hud-help { display: grid; gap: 2px; font-size: 11px; }
.hud-help .alt { opacity: .7; margin-left: 6px; }

/* Toast/HUD */
.hud-toasts {
  position: fixed;
  left: 50%;
  top: 12px;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  gap: 6px;
  z-index: 9999;
  pointer-events: none;
}

.toast {
  min-width: 160px;
  max-width: 80vw;
  padding: 6px 10px;
  border-radius: 10px;
  background: rgba(18, 18, 22, 0.9);
  color: #fff;
  font: 500 12px/1.2 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  box-shadow: 0 4px 14px rgba(0,0,0,0.35);
  opacity: 0;
  transform: translateY(-6px);
  transition: opacity 160ms ease-out, transform 160ms ease-out;
  will-change: opacity, transform;
}

.toast.show { opacity: 1; transform: translateY(0); }
.toast.hide { opacity: 0; transform: translateY(-6px); }

.toast-row { display: flex; align-items: baseline; gap: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.toast-title { opacity: 0.8; }
.toast-value { font-weight: 700; }

/* Subtle accents by kind */
.toast.speed { background: rgba(40, 40, 70, 0.92); }
.toast.mode  { background: rgba(20, 60, 40, 0.92); }
.toast.type  { background: rgba(60, 20, 40, 0.92); }
.toast.theme { background: rgba(40, 40, 40, 0.92); }

@media (prefers-reduced-motion: reduce) {
  .toast, .toast.show, .toast.hide { transition: none; transform: none; }
}
